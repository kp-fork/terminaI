 .gemini-clipboard/clipboard-1766102301215.png      | Bin 396090 -> 0 bytes
 docs/cli/settings.md                               |  12 +-
 docs/get-started/configuration.md                  |  67 +++
 integration-tests/ripgrep-real.test.ts             |   4 +
 package-lock.json                                  |  38 +-
 package.json                                       |   4 +-
 packages/a2a-server/package.json                   |   4 +-
 packages/cli/package.json                          |   4 +-
 .../cli/src/commands/extensions/install.test.ts    |  45 +-
 packages/cli/src/commands/extensions/install.ts    |  46 +-
 .../cli/src/commands/extensions/validate.test.ts   |  10 +-
 packages/cli/src/commands/mcp/list.ts              |  15 +-
 packages/cli/src/config/config.test.ts             |   6 +-
 packages/cli/src/config/config.ts                  |  27 +-
 packages/cli/src/config/extension-manager.ts       |  46 +-
 .../src/config/policy-engine.integration.test.ts   |  17 +-
 .../cli/src/config/settings-validation.test.ts     |  58 +-
 packages/cli/src/config/settings-validation.ts     |   2 +-
 packages/cli/src/config/settings.ts                |  40 +-
 packages/cli/src/config/settingsSchema.ts          |  61 ++-
 .../src/config/settings_validation_warning.test.ts | 156 ++++++
 packages/cli/src/config/trustedFolders.ts          |   1 -
 packages/cli/src/gemini.test.tsx                   |  12 +
 packages/cli/src/gemini.tsx                        |  22 +-
 packages/cli/src/gemini_cleanup.test.tsx           |   2 +
 packages/cli/src/ui/AppContainer.tsx               |   8 +-
 .../cli/src/ui/commands/extensionsCommand.test.ts  | 184 ++++++-
 packages/cli/src/ui/commands/extensionsCommand.ts  | 153 +++++-
 packages/cli/src/ui/components/AppHeader.test.tsx  |   8 +
 packages/cli/src/ui/components/Header.test.tsx     |   4 +-
 packages/cli/src/ui/components/Header.tsx          |   4 +-
 .../cli/src/ui/components/InputPrompt.test.tsx     |  59 ++
 packages/cli/src/ui/components/InputPrompt.tsx     |  33 +-
 .../cli/src/ui/components/ModelDialog.test.tsx     |   3 +
 packages/cli/src/ui/components/ModelDialog.tsx     |   8 +-
 .../__snapshots__/InputPrompt.test.tsx.snap        |  12 +
 .../src/ui/components/shared/text-buffer.test.ts   | 186 +++++++
 .../cli/src/ui/components/shared/text-buffer.ts    | 348 +++++++++++-
 .../components/shared/vim-buffer-actions.test.ts   |   3 +
 packages/cli/src/ui/components/views/HooksList.tsx | 169 +++---
 .../cli/src/ui/components/views/McpStatus.test.tsx |  14 +
 packages/cli/src/ui/components/views/McpStatus.tsx |  57 +-
 packages/cli/src/ui/constants.ts                   |   3 +
 .../cli/src/ui/hooks/useQuotaAndFallback.test.ts   |  17 +
 packages/cli/src/ui/hooks/useQuotaAndFallback.ts   |   5 +-
 packages/cli/src/ui/hooks/useSnowfall.test.tsx     | 108 ++++
 packages/cli/src/ui/hooks/useSnowfall.ts           | 162 ++++++
 packages/cli/src/ui/hooks/vim.test.tsx             |   8 +-
 packages/cli/src/ui/utils/highlight.test.ts        | 100 ++++
 packages/cli/src/ui/utils/highlight.ts             |  98 ++--
 .../src/ui/utils/terminalCapabilityManager.test.ts |  90 ++++
 .../cli/src/ui/utils/terminalCapabilityManager.ts  |  55 ++
 packages/cli/src/utils/readStdin.test.ts           |   4 +
 packages/cli/src/utils/readStdin.ts                |   9 +
 packages/cli/src/utils/readStdin_safety.test.ts    |  92 ++++
 packages/cli/src/utils/sessionUtils.test.ts        |   5 +-
 packages/cli/src/utils/sessionUtils.ts             |  55 +-
 .../cli/src/zed-integration/zedIntegration.test.ts |   2 +-
 packages/cli/src/zed-integration/zedIntegration.ts |   6 +-
 packages/core/package.json                         |   3 +-
 .../core/src/agents/a2a-client-manager.test.ts     | 305 +++++++++++
 packages/core/src/agents/a2a-client-manager.ts     | 209 ++++++++
 packages/core/src/agents/local-executor.ts         |   3 +-
 packages/core/src/availability/policyHelpers.ts    |   2 -
 packages/core/src/code_assist/server.test.ts       |   9 +
 packages/core/src/code_assist/server.ts            |   9 +-
 packages/core/src/code_assist/telemetry.test.ts    |   2 +-
 packages/core/src/config/config.test.ts            |  24 +
 packages/core/src/config/config.ts                 |  68 ++-
 packages/core/src/config/models.test.ts            |  32 +-
 packages/core/src/config/models.ts                 |  17 +-
 packages/core/src/confirmation-bus/types.ts        |   2 +-
 packages/core/src/core/client.ts                   |   6 +-
 packages/core/src/core/contentGenerator.ts         |   4 +-
 packages/core/src/core/coreToolScheduler.test.ts   | 594 +--------------------
 packages/core/src/core/coreToolScheduler.ts        | 404 +++-----------
 packages/core/src/core/turn.ts                     |  29 +-
 packages/core/src/fallback/handler.ts              |  12 -
 packages/core/src/hooks/hookEventHandler.test.ts   |   8 +
 packages/core/src/hooks/hookPlanner.test.ts        |   3 +-
 packages/core/src/hooks/hookPlanner.ts             |  13 +-
 packages/core/src/hooks/hookRegistry.test.ts       | 140 ++++-
 packages/core/src/hooks/hookRegistry.ts            |  62 ++-
 packages/core/src/hooks/hookRunner.test.ts         |  96 +++-
 packages/core/src/hooks/hookRunner.ts              |  29 +-
 packages/core/src/hooks/hookSystem.ts              |   2 +-
 packages/core/src/hooks/index.ts                   |   2 +-
 packages/core/src/hooks/trustedHooks.test.ts       | 183 +++++++
 packages/core/src/hooks/trustedHooks.ts            | 116 ++++
 packages/core/src/hooks/types.test.ts              |  28 -
 packages/core/src/hooks/types.ts                   |  62 +--
 packages/core/src/ide/ide-client.ts                |   3 +
 packages/core/src/index.ts                         |   1 +
 packages/core/src/policy/config.ts                 |  58 +-
 packages/core/src/policy/persistence.test.ts       |  11 +-
 packages/core/src/policy/policy-engine.test.ts     |  41 +-
 packages/core/src/policy/policy-engine.ts          |  45 +-
 packages/core/src/policy/policy-updater.test.ts    | 190 +++++++
 packages/core/src/policy/shell-safety.test.ts      |   3 +-
 packages/core/src/policy/toml-loader.test.ts       |  49 +-
 packages/core/src/policy/toml-loader.ts            |  58 +-
 packages/core/src/policy/types.ts                  |  18 +
 .../src/routing/strategies/overrideStrategy.ts     |   4 +-
 packages/core/src/scheduler/types.ts               | 135 +++++
 .../src/services/environmentSanitization.test.ts   | 309 +++++++++++
 .../core/src/services/environmentSanitization.ts   | 191 +++++++
 packages/core/src/services/gitService.test.ts      |  24 +
 packages/core/src/services/gitService.ts           |  12 +-
 .../src/services/shellExecutionService.test.ts     |  29 +-
 .../core/src/services/shellExecutionService.ts     |  82 +--
 .../clearcut-logger/clearcut-logger.test.ts        |  41 ++
 .../telemetry/clearcut-logger/clearcut-logger.ts   |  29 +
 .../clearcut-logger/event-metadata-key.ts          |  18 +-
 .../core/src/telemetry/loggers.test.circular.ts    |   8 +-
 packages/core/src/telemetry/loggers.test.ts        |  63 +++
 packages/core/src/telemetry/loggers.ts             |   1 +
 .../core/src/telemetry/startupProfiler.test.ts     |  14 +
 packages/core/src/telemetry/startupProfiler.ts     |   6 +-
 packages/core/src/tools/mcp-client.test.ts         |  67 ++-
 packages/core/src/tools/mcp-client.ts              |  11 +-
 packages/core/src/tools/ripGrep.test.ts            |  78 +++
 packages/core/src/tools/ripGrep.ts                 |  13 +
 packages/core/src/tools/shell.ts                   |  18 +-
 packages/core/src/tools/tools.ts                   |   4 +-
 packages/core/src/utils/checkpointUtils.test.ts    |   2 +-
 packages/core/src/utils/checkpointUtils.ts         |   2 +-
 packages/core/src/utils/fileUtils.test.ts          | 210 ++++++++
 packages/core/src/utils/fileUtils.ts               |  65 +++
 packages/core/src/utils/geminiIgnoreParser.test.ts |  64 +++
 packages/core/src/utils/geminiIgnoreParser.ts      |  24 +
 .../utils/generateContentResponseUtilities.test.ts | 312 +++++++++++
 .../src/utils/generateContentResponseUtilities.ts  | 117 ++++
 packages/core/src/utils/terminal.ts                |   8 +
 packages/core/src/utils/tool-utils.test.ts         |  26 +-
 packages/core/src/utils/tool-utils.ts              |  38 ++
 packages/test-utils/package.json                   |   2 +-
 packages/vscode-ide-companion/package.json         |   2 +-
 schemas/settings.schema.json                       |  51 +-
 138 files changed, 6233 insertions(+), 1573 deletions(-)
